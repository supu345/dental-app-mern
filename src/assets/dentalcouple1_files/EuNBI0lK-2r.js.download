;/*FB_PKG_DELIM*/

__d("useAsyncReStoreBulkFix",["isPromise","promiseDone","qex","useAsyncReStore","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;d=(b=c("qex")._("3408"))!=null?b:!1;function a(a,b,d){(h||(h=c("isPromise")))(a)?c("promiseDone").apply(void 0,arguments):b==null?void 0:b(a)}e={onDbReady:c("promiseDone"),useReStoreHook:c("useAsyncReStore")};f={onDbReady:a,useReStoreHook:i||(i=c("useReStore"))};b=d?e:f;d=b.useReStoreHook;e=a;g.useReStoreHook=d;g.onDbReady=e}),98);
__d("MWV2FileDropzone.react",["fbt","LSFactory","LSIssueNewErrorStoredProcedure","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWMediaManagerFileSizeLimit","MWXText.react","MWXTextPairing.react","cometIsMimeTypeForMedia","gkx","promiseDone","react","react-compiler-runtime","recoverableViolation","stylex","useAsyncReStoreBulkFix","useFileDragEvents"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;e=b.createContext;var l=b.useCallback;b.useMemo;var m=b.useRef,n=e({getMediaManagerAttachments:function(){},removeMediaManagerAttachments:function(){},setMediaManagerAttachments:function(){}});function o(a){var b=d("react-compiler-runtime").c(7);a=a.children;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=new Map(),b[0]=e):e=b[0];var f=m(e);b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(a){if(c("gkx")("10452"))return f.current.get(a)},b[1]=e):e=b[1];e=e;var g;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a,b){c("gkx")("10452")&&f.current.set(a,b)},b[2]=g):g=b[2];g=g;var h;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(a){c("gkx")("10452")&&f.current["delete"](a)},b[3]=h):h=b[3];h=h;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(e={getMediaManagerAttachments:e,removeMediaManagerAttachments:h,setMediaManagerAttachments:g},b[4]=e):e=b[4];h=e;g=h;b[5]!==a?(e=k.jsx(n.Provider,{value:g,children:a}),b[5]=a,b[6]=e):e=b[6];return e}var p=e({current:{enabled:!0,handler:null}});function q(a){var b=d("react-compiler-runtime").c(3),c=a.children;a=a.fileUploadHandlerConfigRef;var e=p.Provider;b[0]!==c||b[1]!==a?(e=k.jsx(e,{value:a,children:c}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}var r={root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxWidth:"x193iq5w",minHeight:"x2lwn1j",position:"x1n2onr6",$$css:!0}};function s(a){if(a==null)return[];a=a.dataTransfer;return a==null?[]:a.types}function t(a){switch(a){case 0:return void 0;case 1:return h._(/*BTDS*/"__JHASH__M7mGXjgzxvT__JHASH__").toString();default:return h._(/*BTDS*/"__JHASH__UaK2GgtSNQH__JHASH__").toString()}}function u(a,b){var d=t(b);if(d==null)return;c("promiseDone")(a.runInTransaction(function(a){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:d,errorTitleText:d})},"readwrite",void 0,void 0,f.id+":177"))}function v(a){a=a.type;return d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a)||d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a)?!0:a.startsWith("audio/")}var w=new Set(["text/plain","text/html","text/uri-list"]);function a(a){var b=a.children,e=a.isDisabled,f=a.isMediaOnly,g=a.thread;a=a.xstyle;var j=m({enabled:!1,handler:null}),n=m(null),p=d("useAsyncReStoreBulkFix").useReStoreHook(),t=g!=null?(d("MWCMThreadTypes.react").isBroadcastThread(g.threadType)||d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(g.threadType)||d("LSMessagingThreadTypeUtil").isAiBot(g.threadType))&&!d("LSThreadBitOffset").has(56,g):!1;g=g!=null?d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType):!1;var x=e===!0||t;e=function(a){var b;return((b=j.current)==null?void 0:b.handler)==null?!1:!s(a).some(function(a){return w.has(a)})};e=c("useFileDragEvents")(function(){return!1},void 0,e);var y=l(function(a){d("useAsyncReStoreBulkFix").onDbReady(p,function(b){var d;if(((d=j.current)==null?void 0:d.enabled)===!1)return;d=(d=j.current)==null?void 0:d.handler;if(d==null){if(!t){var e=j.current==null?"fileUploadHandlerConfigRef was not setup to handle dropped file!":"fileUploadHandlerConfigRef.current.handler was not setup to handle dropped file";c("recoverableViolation")(e,"messenger_web_media")}return}e=Array.from(a);var g=f?e.filter(v):e;e.length!==g.length&&u(b,e.length);!x&&g.length!==0&&d(g)})},[f,x,t,p]);c("useFileDragEvents")(y,n.current,function(a){return!0});return k.jsxs("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props(r.root,(y=a)!=null?y:!1),{ref:n,children:[k.jsx(q,{fileUploadHandlerConfigRef:j,children:k.jsx(o,{children:b})}),!x&&e?k.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x1h0vfkc x1ey2m1c x78zum5 xds687c x17qophe xl56j7k x10l6tqk x13vifvy x1vjfegm"},{children:c("gkx")("7430")?k.jsx(c("MWXTextPairing.react"),{body:h._(/*BTDS*/"__JHASH__AnH53PdmVOq__JHASH__",[h._param("fileSizeLimit",String(d("MWMediaManagerFileSizeLimit").getMWMaxAttachmentSizeInMB(g)))]),bodyColor:"secondary",headline:h._(/*BTDS*/"__JHASH__Cpq0daihgaG__JHASH__"),level:4,textAlign:"center"}):k.jsx(c("MWXText.react"),{type:"body1",children:h._(/*BTDS*/"__JHASH__Cpq0daihgaG__JHASH__")})})):null]}))}a.displayName=a.name+" [from "+f.id+"]";g.MediaPreProcessMapContext=n;g.mWV2FileDropzoneContext=p;g.MWV2FileDropzone=a}),226);